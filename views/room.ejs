<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
<script src="/scripts/jquery-3.4.1.min.js"></script>
<script src="/scripts/wrtchelper.js"></script>
<script src="/scripts/app.js"></script>
<script>
    const ROOM_ID = "<%= roomId %>"
</script>
<script>
        
    $(function () {
        
        const urlParams = new URLSearchParams(window.location.search);
        
        var meeting_id = ROOM_ID;

        if (!meeting_id) {
            var murl = window.location.origin + "?mid=" +  (new Date()).getTime();
            $('#meetingid').attr('href',murl).text('Start Meeting');
            $("#meetingContainer").hide();
            $("#meetingbox").show();
            return;
        }

        var user_id = urlParams.get('uid');
        if (!user_id) {
            user_id = window.prompt('Enter your nick!');
        }

        if (!user_id || !meeting_id) {
            alert('user id or meeting id missing');
            return;
        }
        $("#meetingContainer").show();
        $("#meetingbox").hide();

        MyApp._init(user_id,meeting_id);

    });
</script>
<style type="text/css">
    body{
    font-size: large;
}
.userbox {
    margin-left: 20px;
    padding: 8px;
    width: 450px;
    /* height:366px; */
    border: 1px solid transparent;
    color: var(--fc-medium);
    border-color: var(--powder-400);
    background-color: burlywood;
    float: left;
}

.userbox video {
    display: inline-block;
    border: 1px solid red;
    margin: 0;
    padding: 0;
    width: 450px;
    height: 300px;
}

.footer{
    font-size: large;

}
</style>
<div id="meetingbox" style="display: none;">
    <p><a id='meetingid' style="color: #000;" href="#"></a>
    </p>
</div>

<div id="meetingContainer" style="display: none;">
    <h1 id='meetingname'></h1>
    <div>
        <div style="width:200px;height:300px;float:left;overflow-y: scroll;display:none" id="messages">
            <div><input type="text" id="msgbox" /><button id="btnsend">Send</button></div>
        </div>
        <div id='divUsers' style="display:none">
            <div id="me" class="userbox">
                <h2></h2>
                <div>
                    <video autoplay muted id="localVideoCtr" />
                </div>
            </div>
            <div id="otherTemplate" class="userbox" style="display:none">
                <h2></h2>
                <div>
                    <video autoplay muted id="remoteVideoCtr111"></video>
                    <audio autoplay controls style="display:none" id="remoteAudioCtr111"></audio>
                </div>
            </div>
        </div>
    </div>

    <div style="clear: both;"></div>
    <div class="toolbox" style="display:none">
        <button id="btnMuteUnmute">UnMute</button>
        <button id="btnStartStopCam">Start Camera</button>
        <button id="btnStartStopScreenshare">Screen Share</button>
        <button id="btnResetMeeting">Reset Meeting</button>
    </div>
</div>
